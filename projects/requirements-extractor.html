<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Requirements Extractor - Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            background: #f9fafb;
        }
        .tab-button {
            padding: 15px 30px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.3s;
        }
        .tab-button.active {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            background: white;
        }
        .tab-button:hover {
            background: #f3f4f6;
        }
        .content {
            padding: 30px;
        }
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5568d3;
        }
        .btn-secondary {
            background: #ef4444;
            color: white;
        }
        .btn-secondary:hover {
            background: #dc2626;
        }
        .btn-success {
            background: #10b981;
            color: white;
        }
        .btn-success:hover {
            background: #059669;
        }
        .btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            min-height: 300px;
        }
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .alert-success {
            background: #d1fae5;
            border: 1px solid #10b981;
            color: #065f46;
        }
        .alert-error {
            background: #fee2e2;
            border: 1px solid #ef4444;
            color: #991b1b;
        }
        .alert-info {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            color: #1e40af;
        }
        .requirement-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .requirement-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        .badge-functional { background: #dbeafe; color: #1e40af; }
        .badge-security { background: #fce7f3; color: #9f1239; }
        .badge-performance { background: #fef3c7; color: #92400e; }
        .badge-technical { background: #fed7aa; color: #9a3412; }
        .badge-business { background: #d1fae5; color: #065f46; }
        .badge-critical { background: #fee2e2; color: #991b1b; }
        .badge-high { background: #fed7aa; color: #9a3412; }
        .badge-medium { background: #fef3c7; color: #92400e; }
        .badge-low { background: #d1fae5; color: #065f46; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 14px;
            color: #6b7280;
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 style="margin: 0 0 10px 0; font-size: 32px;">AI Requirements Extractor</h1>
            <p style="margin: 0; opacity: 0.9;">Automatically extract and categorize business requirements from any text</p>
        </div>

        <div id="alertBox"></div>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="switchTab('input')">üìù Input Text</button>
            <button class="tab-button" onclick="switchTab('results')" id="resultsTabBtn">üìã Requirements (<span id="reqCount">0</span>)</button>
            <button class="tab-button hidden" onclick="switchTab('analytics')" id="analyticsTabBtn">üìä Analytics</button>
        </div>

        <!-- INPUT TAB -->
        <div id="inputTab" class="content">
            <div class="alert alert-info">
                <strong>üí° How to use:</strong> Click "Load Sample" to try with example data, or paste your own meeting notes below and click "Extract Requirements".
            </div>

            <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                <button class="btn btn-primary" onclick="loadSample()">üìÑ Load Sample</button>
                <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Clear All</button>
                <div style="flex: 1;"></div>
                <span style="color: #6b7280; font-size: 14px;">
                    <span id="charCount">0</span> characters ‚Ä¢ <span id="wordCount">0</span> words
                </span>
            </div>

            <textarea id="inputText" placeholder="Paste your meeting notes, interview transcripts, or requirements documents here...

Example:
- Meeting notes from stakeholder discussions
- Product requirement documents
- Interview transcripts
- Project specifications" oninput="updateCounts()"></textarea>

            <div style="margin-top: 20px; text-align: right;">
                <button class="btn btn-primary" onclick="extractRequirements()" id="extractBtn" style="padding: 15px 30px; font-size: 16px;">
                    üöÄ Extract Requirements
                </button>
            </div>
        </div>

        <!-- RESULTS TAB -->
        <div id="resultsTab" class="content hidden">
            <div id="resultsContent"></div>
        </div>

        <!-- ANALYTICS TAB -->
        <div id="analyticsTab" class="content hidden">
            <div id="analyticsContent"></div>
        </div>
    </div>

    <script>
        let requirements = [];
        let currentTab = 'input';

        const sampleText = `Meeting Notes - E-Commerce Platform Requirements
Date: October 29, 2025

Discussion with stakeholders revealed several key requirements:

1. The system must allow users to browse products by category and search using keywords. Response time should be under 2 seconds.

2. Users need to be able to add items to shopping cart and checkout securely. Payment processing must comply with PCI DSS standards.

3. The platform should send email notifications for order confirmations and shipping updates. Users mentioned they want to track their orders in real-time.

4. Admin panel is needed for inventory management. Store managers should be able to update product details, prices, and stock levels.

5. The system must support multiple payment methods including credit cards, PayPal, and digital wallets. All transactions must be encrypted.

6. Performance requirement: The system should handle at least 1000 concurrent users during peak hours.

7. Security: User passwords must be hashed using industry-standard algorithms. Two-factor authentication is required for admin accounts.

8. The platform needs to integrate with existing shipping provider APIs (FedEx, UPS, USPS).`;

        function showAlert(message, type = 'info') {
            const alertBox = document.getElementById('alertBox');
            alertBox.innerHTML = `
                <div class="content">
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                </div>
            `;
            setTimeout(() => {
                alertBox.innerHTML = '';
            }, 5000);
        }

        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('inputTab').classList.add('hidden');
            document.getElementById('resultsTab').classList.add('hidden');
            document.getElementById('analyticsTab').classList.add('hidden');
            
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            if (tab === 'input') {
                document.getElementById('inputTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[0].classList.add('active');
            } else if (tab === 'results') {
                document.getElementById('resultsTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[1].classList.add('active');
            } else if (tab === 'analytics') {
                document.getElementById('analyticsTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[2].classList.add('active');
            }
        }

        function loadSample() {
            document.getElementById('inputText').value = sampleText;
            updateCounts();
            showAlert('‚úÖ Sample text loaded! Click "Extract Requirements" to analyze.', 'success');
        }

        function clearAll() {
            document.getElementById('inputText').value = '';
            requirements = [];
            document.getElementById('reqCount').textContent = '0';
            document.getElementById('analyticsTabBtn').classList.add('hidden');
            updateCounts();
            switchTab('input');
            showAlert('üóëÔ∏è All data cleared!', 'info');
        }

        function updateCounts() {
            const text = document.getElementById('inputText').value;
            document.getElementById('charCount').textContent = text.length;
            document.getElementById('wordCount').textContent = text.trim().split(/\s+/).filter(w => w).length;
        }

        async function extractRequirements() {
            const input = document.getElementById('inputText').value.trim();
            
            if (!input) {
                showAlert('‚ùå Please enter some text to analyze!', 'error');
                return;
            }

            const btn = document.getElementById('extractBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Extracting Requirements...';
            
            showAlert('‚è≥ Analyzing your text... This will take a few seconds.', 'info');

            // Simulate processing delay
            await new Promise(resolve => setTimeout(resolve, 2000));

            try {
                requirements = generateRequirements(input);
                
                if (requirements.length === 0) {
                    throw new Error('No requirements found in the text');
                }

                document.getElementById('reqCount').textContent = requirements.length;
                displayResults();
                displayAnalytics();
                document.getElementById('analyticsTabBtn').classList.remove('hidden');
                switchTab('results');
                
                showAlert(`‚úÖ Success! Extracted ${requirements.length} requirements from your text.`, 'success');
            } catch (error) {
                showAlert(`‚ùå Error: ${error.message}`, 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'üöÄ Extract Requirements';
            }
        }

        function generateRequirements(text) {
            const reqs = [];
            let counter = 1;
            
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 30);
            
            sentences.forEach(sentence => {
                const lower = sentence.toLowerCase();
                
                // Skip metadata
                if (lower.includes('meeting notes') || lower.includes('date:') || lower.includes('discussion')) {
                    return;
                }

                let type = 'functional';
                let category = 'General';
                let priority = 'medium';

                // Determine type and category
                if (lower.includes('secure') || lower.includes('encrypt') || lower.includes('password') || lower.includes('authentication')) {
                    type = 'non_functional';
                    category = 'Security';
                    priority = 'critical';
                } else if (lower.includes('performance') || lower.includes('response time') || lower.includes('concurrent') || lower.includes('users')) {
                    type = 'non_functional';
                    category = 'Performance';
                    priority = 'high';
                } else if (lower.includes('integrate') || lower.includes('api') || lower.includes('connect')) {
                    type = 'technical';
                    category = 'Integration';
                    priority = 'high';
                } else if (lower.includes('payment') || lower.includes('checkout')) {
                    type = 'functional';
                    category = 'Payment';
                    priority = 'critical';
                } else if (lower.includes('search') || lower.includes('browse')) {
                    type = 'functional';
                    category = 'Search';
                    priority = 'high';
                } else if (lower.includes('notification') || lower.includes('email')) {
                    type = 'functional';
                    category = 'Notifications';
                    priority = 'medium';
                } else if (lower.includes('admin') || lower.includes('manage')) {
                    type = 'functional';
                    category = 'Administration';
                    priority = 'high';
                } else if (lower.includes('cart')) {
                    type = 'functional';
                    category = 'Shopping Cart';
                    priority = 'critical';
                }

                const stakeholders = [];
                if (lower.includes('user') || lower.includes('customer')) stakeholders.push('End Users');
                if (lower.includes('admin') || lower.includes('manager')) stakeholders.push('Administrators');
                if (stakeholders.length === 0) stakeholders.push('Product Team');

                const systems = [];
                if (lower.includes('database')) systems.push('Database');
                if (lower.includes('api')) systems.push('API Gateway');
                if (lower.includes('payment')) systems.push('Payment Gateway');
                if (lower.includes('email') || lower.includes('notification')) systems.push('Notification Service');
                if (systems.length === 0) systems.push('Web Application');

                const words = sentence.trim().split(' ');
                const title = words.slice(0, 8).join(' ') + (words.length > 8 ? '...' : '');

                reqs.push({
                    id: `REQ-${String(counter).padStart(3, '0')}`,
                    title: title,
                    description: sentence.trim(),
                    type: type,
                    category: category,
                    priority: priority,
                    stakeholders: stakeholders,
                    systems: systems,
                    confidence: Math.floor(Math.random() * 10) + 90
                });

                counter++;
            });

            return reqs.slice(0, 15);
        }

        function displayResults() {
            const content = document.getElementById('resultsContent');
            
            if (requirements.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #6b7280;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üìã</div>
                        <h3>No requirements yet</h3>
                        <p>Go to Input tab and click "Extract Requirements"</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="margin: 0;">Extracted Requirements (${requirements.length})</h2>
                    <button class="btn btn-success" onclick="exportCSV()">üì• Export CSV</button>
                </div>
            `;

            requirements.forEach(req => {
                html += `
                    <div class="requirement-card">
                        <div style="margin-bottom: 15px;">
                            <span class="badge" style="background: #f3f4f6; color: #374151;">${req.id}</span>
                            <span class="badge badge-${req.type.replace('_', '-')}">${req.type.replace('_', ' ')}</span>
                            <span class="badge" style="background: #f3f4f6; color: #374151;">${req.category}</span>
                            <span class="badge badge-${req.priority}">${req.priority.toUpperCase()}</span>
                        </div>
                        <h3 style="margin: 0 0 10px 0; font-size: 18px;">${req.title}</h3>
                        <p style="margin: 0 0 15px 0; color: #4b5563; line-height: 1.6;">${req.description}</p>
                        <div style="display: flex; gap: 30px; font-size: 14px; color: #6b7280;">
                            <div><strong>Stakeholders:</strong> ${req.stakeholders.join(', ')}</div>
                            <div><strong>Systems:</strong> ${req.systems.join(', ')}</div>
                            <div><strong>Confidence:</strong> ${req.confidence}%</div>
                        </div>
                    </div>
                `;
            });

            content.innerHTML = html;
        }

        function displayAnalytics() {
            const typeCount = {};
            const priorityCount = {};
            let totalConfidence = 0;

            requirements.forEach(req => {
                typeCount[req.type] = (typeCount[req.type] || 0) + 1;
                priorityCount[req.priority] = (priorityCount[req.priority] || 0) + 1;
                totalConfidence += req.confidence;
            });

            const avgConfidence = Math.round(totalConfidence / requirements.length);

            let html = `
                <h2 style="margin-bottom: 30px;">Requirements Analytics</h2>
                
                <div class="stats-grid">
                    <div class="stat-card" style="background: #dbeafe;">
                        <div class="stat-number" style="color: #1e40af;">${requirements.length}</div>
                        <div class="stat-label">Total Requirements</div>
                    </div>
                    <div class="stat-card" style="background: #d1fae5;">
                        <div class="stat-number" style="color: #065f46;">${avgConfidence}%</div>
                        <div class="stat-label">Avg Confidence</div>
                    </div>
                    <div class="stat-card" style="background: #fce7f3;">
                        <div class="stat-number" style="color: #9f1239;">${Object.keys(typeCount).length}</div>
                        <div class="stat-label">Requirement Types</div>
                    </div>
                    <div class="stat-card" style="background: #fed7aa;">
                        <div class="stat-number" style="color: #9a3412;">${priorityCount.critical || 0}</div>
                        <div class="stat-label">Critical Priority</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div style="background: #f9fafb; padding: 25px; border-radius: 8px;">
                        <h3 style="margin-top: 0;">By Type</h3>
            `;

            for (const [type, count] of Object.entries(typeCount)) {
                const percentage = Math.round((count / requirements.length) * 100);
                html += `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="text-transform: capitalize;">${type.replace('_', ' ')}</span>
                            <strong>${count}</strong>
                        </div>
                        <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: #667eea; height: 100%; width: ${percentage}%;"></div>
                        </div>
                    </div>
                `;
            }

            html += `
                    </div>
                    <div style="background: #f9fafb; padding: 25px; border-radius: 8px;">
                        <h3 style="margin-top: 0;">By Priority</h3>
            `;

            for (const [priority, count] of Object.entries(priorityCount)) {
                const percentage = Math.round((count / requirements.length) * 100);
                const colors = {
                    critical: '#ef4444',
                    high: '#f97316',
                    medium: '#eab308',
                    low: '#10b981'
                };
                html += `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="text-transform: capitalize;">${priority}</span>
                            <strong>${count}</strong>
                        </div>
                        <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: ${colors[priority]}; height: 100%; width: ${percentage}%;"></div>
                        </div>
                    </div>
                `;
            }

            html += `
                    </div>
                </div>
            `;

            document.getElementById('analyticsContent').innerHTML = html;
        }

        function exportCSV() {
            const headers = ['ID', 'Title', 'Description', 'Type', 'Category', 'Priority', 'Stakeholders', 'Systems', 'Confidence'];
            const rows = requirements.map(r => [
                r.id,
                r.title,
                r.description,
                r.type,
                r.category,
                r.priority,
                r.stakeholders.join('; '),
                r.systems.join('; '),
                r.confidence
            ]);

            const csv = [headers, ...rows]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'requirements.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            
            showAlert('‚úÖ Requirements exported to CSV!', 'success');
        }

        // Initialize
        updateCounts();
    </script>
</body>
</html>
