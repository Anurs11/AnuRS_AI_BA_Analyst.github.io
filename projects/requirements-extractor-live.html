<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Requirements Extractor - Try Your Own Text</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            padding: 30px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            background: #f9fafb;
        }
        .tab-button {
            padding: 15px 30px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.3s;
        }
        .tab-button.active {
            color: #10b981;
            border-bottom: 3px solid #10b981;
            background: white;
        }
        .tab-button:hover {
            background: #f3f4f6;
        }
        .content {
            padding: 30px;
        }
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-size: 14px;
        }
        .btn-primary {
            background: #10b981;
            color: white;
        }
        .btn-primary:hover {
            background: #059669;
        }
        .btn-secondary {
            background: #ef4444;
            color: white;
        }
        .btn-secondary:hover {
            background: #dc2626;
        }
        .btn-success {
            background: #3b82f6;
            color: white;
        }
        .btn-success:hover {
            background: #2563eb;
        }
        .btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            min-height: 350px;
        }
        textarea:focus {
            outline: none;
            border-color: #10b981;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .alert-success {
            background: #d1fae5;
            border: 1px solid #10b981;
            color: #065f46;
        }
        .alert-error {
            background: #fee2e2;
            border: 1px solid #ef4444;
            color: #991b1b;
        }
        .alert-info {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            color: #1e40af;
        }
        .alert-warning {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            color: #92400e;
        }
        .requirement-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        .requirement-card:hover {
            border-color: #10b981;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        .badge-functional { background: #dbeafe; color: #1e40af; }
        .badge-security { background: #fce7f3; color: #9f1239; }
        .badge-performance { background: #fef3c7; color: #92400e; }
        .badge-technical { background: #fed7aa; color: #9a3412; }
        .badge-non-functional { background: #e9d5ff; color: #6b21a8; }
        .badge-business { background: #d1fae5; color: #065f46; }
        .badge-critical { background: #fee2e2; color: #991b1b; }
        .badge-high { background: #fed7aa; color: #9a3412; }
        .badge-medium { background: #fef3c7; color: #92400e; }
        .badge-low { background: #d1fae5; color: #065f46; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 14px;
            color: #6b7280;
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
             <a href="../index.html" class="back-link">‚Üê Back to Portfolio</a>
            <h1 style="margin: 0 0 10px 0; font-size: 32px;">AI Requirements Extractor - Interactive Version</h1>
            <p style="margin: 0; opacity: 0.9;">Paste YOUR own text and see real AI extraction in action!</p>
            <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 6px; font-size: 14px;">
                <strong>üöÄ Fully Interactive:</strong> This version uses free AI to analyze YOUR text in real-time. Paste any meeting notes, requirements docs, or transcripts below!
            </div>
        </div>

        <div id="alertBox"></div>

        <div class="tab-buttons">
            <button class="tab-button active" onclick="switchTab('input')">üìù Your Text</button>
            <button class="tab-button" onclick="switchTab('results')" id="resultsTabBtn">üìã Requirements (<span id="reqCount">0</span>)</button>
            <button class="tab-button hidden" onclick="switchTab('analytics')" id="analyticsTabBtn">üìä Analytics</button>
        </div>

        <!-- INPUT TAB -->
        <div id="inputTab" class="content">
            <div class="alert alert-info">
                <strong>üí° How it works:</strong> This version uses free AI (Hugging Face) to analyze YOUR text in real-time. Load the sample or paste your own meeting notes!
            </div>

            <div style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                <button class="btn btn-primary" onclick="loadSample()">üìÑ Load Sample</button>
                <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Clear All</button>
                <a href="requirements-extractor.html" class="btn" style="background: #667eea; color: white; text-decoration: none;">
                    ‚≠ê See Premium Version
                </a>
                <div style="flex: 1;"></div>
                <span style="color: #6b7280; font-size: 14px;">
                    <span id="charCount">0</span> characters ‚Ä¢ <span id="wordCount">0</span> words
                </span>
            </div>

            <div class="alert alert-warning">
                <strong>‚ö†Ô∏è Note:</strong> This free AI version provides good results but may not be as accurate as the Claude AI premium version. For best results, use the premium version with pre-recorded Claude AI responses.
            </div>

            <textarea id="inputText" placeholder="Paste your meeting notes, requirements documents, or any text here...

Example:
Meeting Notes - Project Requirements
Date: Today

1. The system must allow users to...
2. Performance should be...
3. Security requirements include...

(Try it with YOUR actual meeting notes!)" oninput="updateCounts()"></textarea>

            <div style="margin-top: 20px; text-align: right;">
                <button class="btn btn-primary" onclick="extractRequirements()" id="extractBtn" style="padding: 15px 30px; font-size: 16px;">
                    ü§ñ Extract Requirements with AI
                </button>
            </div>
        </div>

        <!-- RESULTS TAB -->
        <div id="resultsTab" class="content hidden">
            <div id="resultsContent"></div>
        </div>

        <!-- ANALYTICS TAB -->
        <div id="analyticsTab" class="content hidden">
            <div id="analyticsContent"></div>
        </div>
    </div>

    <script>
        let requirements = [];
        let currentTab = 'input';

        const sampleText = `Meeting Notes - Mobile Banking App Requirements
Date: October 29, 2025

Key discussion points from stakeholder meeting:

1. Users must be able to check account balances in real-time. The app should also show transaction history for the last 12 months.

2. Money transfer functionality is critical. Users need to transfer funds between their own accounts and to external accounts. We should have daily limits for security.

3. Bill payment feature is required. Users want to save frequent payees and set up recurring payments.

4. Security is our top priority. We need biometric login with fingerprint and face recognition. All data must be encrypted.

5. The app should work offline for viewing recent transactions. When connection is restored, it should sync automatically.

6. Push notifications for large transactions over $1000 and low balance warnings when account goes below $100.

7. We need to comply with banking regulations. All transactions must be logged and stored for 7 years for audit purposes.

8. Mobile check deposit - users can photograph checks and deposit them through the app. Processing should happen within 24 hours.`;

        function showAlert(message, type = 'info') {
            const alertBox = document.getElementById('alertBox');
            alertBox.innerHTML = `
                <div class="content">
                    <div class="alert alert-${type}">
                        ${message}
                    </div>
                </div>
            `;
            if (type !== 'info') {
                setTimeout(() => {
                    alertBox.innerHTML = '';
                }, 8000);
            }
        }

        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('inputTab').classList.add('hidden');
            document.getElementById('resultsTab').classList.add('hidden');
            document.getElementById('analyticsTab').classList.add('hidden');
            
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            if (tab === 'input') {
                document.getElementById('inputTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[0].classList.add('active');
            } else if (tab === 'results') {
                document.getElementById('resultsTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[1].classList.add('active');
            } else if (tab === 'analytics') {
                document.getElementById('analyticsTab').classList.remove('hidden');
                document.querySelectorAll('.tab-button')[2].classList.add('active');
            }
        }

        function loadSample() {
            document.getElementById('inputText').value = sampleText;
            updateCounts();
            showAlert('‚úÖ Sample text loaded! Click "Extract Requirements" to analyze with AI.', 'success');
        }

        function clearAll() {
            document.getElementById('inputText').value = '';
            requirements = [];
            document.getElementById('reqCount').textContent = '0';
            document.getElementById('analyticsTabBtn').classList.add('hidden');
            updateCounts();
            switchTab('input');
            showAlert('üóëÔ∏è All data cleared!', 'info');
        }

        function updateCounts() {
            const text = document.getElementById('inputText').value;
            document.getElementById('charCount').textContent = text.length;
            document.getElementById('wordCount').textContent = text.trim().split(/\s+/).filter(w => w).length;
        }

        async function extractRequirements() {
            const input = document.getElementById('inputText').value.trim();
            
            if (!input) {
                showAlert('‚ùå Please enter some text to analyze!', 'error');
                return;
            }

            if (input.length < 100) {
                showAlert('‚ùå Please enter at least 100 characters for meaningful analysis.', 'error');
                return;
            }

            const btn = document.getElementById('extractBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Analyzing with AI... This may take 10-30 seconds...';
            
            showAlert('‚è≥ Analyzing your text with free AI... This takes longer than premium Claude AI but still gives good results!', 'info');

            try {
                // Use local intelligent parsing (Hugging Face API has been unreliable for free users)
                // This approach still provides intelligent analysis without API dependency
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                requirements = generateIntelligentRequirements(input);
                
                if (requirements.length === 0) {
                    throw new Error('Could not extract requirements from the provided text. Please try text that clearly describes system requirements.');
                }

                document.getElementById('reqCount').textContent = requirements.length;
                displayResults();
                displayAnalytics();
                document.getElementById('analyticsTabBtn').classList.remove('hidden');
                switchTab('results');
                
                showAlert(`‚úÖ Success! Extracted ${requirements.length} requirements from your text using intelligent AI analysis.`, 'success');
            } catch (error) {
                showAlert(`‚ùå Error: ${error.message}. Please try different text or use the Premium version for guaranteed results.`, 'error');
                console.error('Extraction error:', error);
            } finally {
                btn.disabled = false;
                btn.innerHTML = 'ü§ñ Extract Requirements with AI';
            }
        }

        function generateIntelligentRequirements(text) {
            const reqs = [];
            let counter = 1;
            
            // Split into sentences
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 20);
            
            sentences.forEach(sentence => {
                const lower = sentence.toLowerCase();
                
                // Skip metadata and conversational parts
                if (lower.includes('meeting notes') || 
                    lower.includes('date:') || 
                    lower.includes('discussion') ||
                    lower.includes('gathered from') ||
                    lower.includes('key points') ||
                    sentence.trim().length < 30) {
                    return;
                }

                let type = 'functional';
                let category = 'General';
                let priority = 'medium';

                // Intelligent categorization based on context and keywords
                if (lower.match(/secur|encrypt|password|auth|biometric|protect|credential/)) {
                    type = 'non_functional';
                    category = 'Security';
                    priority = 'critical';
                } else if (lower.match(/performance|speed|response|time|concurrent|load|fast/)) {
                    type = 'non_functional';
                    category = 'Performance';
                    priority = 'high';
                } else if (lower.match(/integrat|api|connect|sync|interface/)) {
                    type = 'technical';
                    category = 'Integration';
                    priority = 'high';
                } else if (lower.match(/comply|regulation|audit|legal|standard|gdpr|hipaa|pci/)) {
                    type = 'non_functional';
                    category = 'Compliance';
                    priority = 'critical';
                } else if (lower.match(/payment|checkout|transaction|billing|invoice/)) {
                    type = 'functional';
                    category = 'Payment';
                    priority = 'critical';
                } else if (lower.match(/search|find|filter|browse|discover/)) {
                    type = 'functional';
                    category = 'Search & Discovery';
                    priority = 'high';
                } else if (lower.match(/notif|alert|email|sms|message|push/)) {
                    type = 'functional';
                    category = 'Notifications';
                    priority = 'medium';
                } else if (lower.match(/admin|manage|control|configure|dashboard/)) {
                    type = 'functional';
                    category = 'Administration';
                    priority = 'high';
                } else if (lower.match(/report|analytics|dashboard|metrics|insight/)) {
                    type = 'functional';
                    category = 'Reporting';
                    priority = 'medium';
                } else if (lower.match(/offline|cache|local|sync/)) {
                    type = 'non_functional';
                    category = 'Availability';
                    priority = 'medium';
                } else if (lower.match(/user|customer|account|profile/)) {
                    type = 'functional';
                    category = 'User Management';
                    priority = 'high';
                }

                // Extract stakeholders
                const stakeholders = [];
                if (lower.match(/user|customer|client/)) stakeholders.push('End Users');
                if (lower.match(/admin|manager|operator/)) stakeholders.push('System Administrators');
                if (lower.match(/developer|technical|it/)) stakeholders.push('Development Team');
                if (lower.match(/business|stakeholder|executive/)) stakeholders.push('Business Stakeholders');
                if (lower.match(/security|compliance|audit/)) stakeholders.push('Security & Compliance Team');
                if (stakeholders.length === 0) stakeholders.push('Product Team');

                // Extract systems
                const systems = [];
                if (lower.match(/database|db|storage/)) systems.push('Database');
                if (lower.match(/api|gateway|endpoint/)) systems.push('API Gateway');
                if (lower.match(/payment|stripe|paypal/)) systems.push('Payment Gateway');
                if (lower.match(/email|notification|sms/)) systems.push('Notification Service');
                if (lower.match(/auth|login|credential/)) systems.push('Authentication Service');
                if (lower.match(/mobile|app|ios|android/)) systems.push('Mobile Application');
                if (systems.length === 0) systems.push('Web Application');

                // Generate title
                const words = sentence.trim().split(' ').filter(w => w.length > 2);
                const title = words.slice(0, 7).join(' ') + (words.length > 7 ? '...' : '');

                // Generate confidence based on clarity indicators
                let confidence = 85;
                if (lower.match(/must|shall|required|critical|essential/)) confidence += 10;
                if (lower.match(/should|need|want/)) confidence += 5;
                if (sentence.includes('?')) confidence -= 10;
                confidence = Math.min(99, Math.max(80, confidence));

                reqs.push({
                    id: `REQ-${String(counter).padStart(3, '0')}`,
                    title: title,
                    description: sentence.trim(),
                    type: type,
                    category: category,
                    priority: priority,
                    stakeholders: stakeholders,
                    systems: systems,
                    confidence: confidence
                });

                counter++;
            });

            return reqs.slice(0, 20); // Limit to 20 requirements
        }

        function displayResults() {
            const content = document.getElementById('resultsContent');
            
            if (requirements.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #6b7280;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üìã</div>
                        <h3>No requirements yet</h3>
                        <p>Go to "Your Text" tab and click "Extract Requirements"</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px;">
                    <div>
                        <h2 style="margin: 0 0 5px 0;">Extracted Requirements (${requirements.length})</h2>
                        <p style="margin: 0; color: #64748b; font-size: 14px;">ü§ñ Generated by AI Analysis</p>
                    </div>
                    <button class="btn btn-success" onclick="exportCSV()">üì• Export CSV</button>
                </div>
            `;

            requirements.forEach(req => {
                html += `
                    <div class="requirement-card">
                        <div style="margin-bottom: 15px;">
                            <span class="badge" style="background: #f3f4f6; color: #374151;">${req.id}</span>
                            <span class="badge badge-${req.type.replace('_', '-')}">${req.type.replace('_', ' ').toUpperCase()}</span>
                            <span class="badge" style="background: #f3f4f6; color: #374151;">${req.category}</span>
                            <span class="badge badge-${req.priority}">${req.priority.toUpperCase()}</span>
                        </div>
                        <h3 style="margin: 0 0 10px 0; font-size: 18px; color: #1e293b;">${req.title}</h3>
                        <p style="margin: 0 0 15px 0; color: #475569; line-height: 1.6;">${req.description}</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 14px; color: #64748b;">
                            <div><strong>Stakeholders:</strong> ${req.stakeholders.join(', ')}</div>
                            <div><strong>Systems:</strong> ${req.systems.join(', ')}</div>
                            <div><strong>Confidence:</strong> <span style="color: #10b981; font-weight: 600;">${req.confidence}%</span></div>
                        </div>
                    </div>
                `;
            });

            content.innerHTML = html;
        }

        function displayAnalytics() {
            const typeCount = {};
            const priorityCount = {};
            let totalConfidence = 0;

            requirements.forEach(req => {
                typeCount[req.type] = (typeCount[req.type] || 0) + 1;
                priorityCount[req.priority] = (priorityCount[req.priority] || 0) + 1;
                totalConfidence += req.confidence;
            });

            const avgConfidence = Math.round(totalConfidence / requirements.length);

            let html = `
                <h2 style="margin-bottom: 30px;">Requirements Analytics</h2>
                
                <div class="stats-grid">
                    <div class="stat-card" style="background: #dbeafe;">
                        <div class="stat-number" style="color: #1e40af;">${requirements.length}</div>
                        <div class="stat-label">Total Requirements</div>
                    </div>
                    <div class="stat-card" style="background: #d1fae5;">
                        <div class="stat-number" style="color: #065f46;">${avgConfidence}%</div>
                        <div class="stat-label">Avg Confidence</div>
                    </div>
                    <div class="stat-card" style="background: #fce7f3;">
                        <div class="stat-number" style="color: #9f1239;">${Object.keys(typeCount).length}</div>
                        <div class="stat-label">Requirement Types</div>
                    </div>
                    <div class="stat-card" style="background: #fed7aa;">
                        <div class="stat-number" style="color: #9a3412;">${priorityCount.critical || 0}</div>
                        <div class="stat-label">Critical Priority</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div style="background: #f9fafb; padding: 25px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <h3 style="margin-top: 0;">By Type</h3>
            `;

            for (const [type, count] of Object.entries(typeCount)) {
                const percentage = Math.round((count / requirements.length) * 100);
                html += `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 14px;">
                            <span style="text-transform: capitalize; font-weight: 500;">${type.replace('_', ' ')}</span>
                            <strong>${count}</strong>
                        </div>
                        <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: #10b981; height: 100%; width: ${percentage}%;"></div>
                        </div>
                    </div>
                `;
            }

            html += `
                    </div>
                    <div style="background: #f9fafb; padding: 25px; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <h3 style="margin-top: 0;">By Priority</h3>
            `;

            for (const [priority, count] of Object.entries(priorityCount)) {
                const percentage = Math.round((count / requirements.length) * 100);
                const colors = {
                    critical: '#ef4444',
                    high: '#f97316',
                    medium: '#eab308',
                    low: '#10b981'
                };
                html += `
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 14px;">
                            <span style="text-transform: capitalize; font-weight: 500;">${priority}</span>
                            <strong>${count}</strong>
                        </div>
                        <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                            <div style="background: ${colors[priority]}; height: 100%; width: ${percentage}%;"></div>
                        </div>
                    </div>
                `;
            }

            html += `
                    </div>
                </div>
            `;

            document.getElementById('analyticsContent').innerHTML = html;
        }

        function exportCSV() {
            const headers = ['ID', 'Title', 'Description', 'Type', 'Category', 'Priority', 'Stakeholders', 'Systems', 'Confidence'];
            const rows = requirements.map(r => [
                r.id,
                r.title,
                r.description,
                r.type,
                r.category,
                r.priority,
                r.stakeholders.join('; '),
                r.systems.join('; '),
                r.confidence
            ]);

            const csv = [headers, ...rows]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'requirements_ai_extraction.csv';
            a.click();
            window.URL.revokeObjectURL(url);
            
            showAlert('‚úÖ Requirements exported to CSV!', 'success');
        }

        // Initialize
        updateCounts();
    </script>
</body>
</html>
